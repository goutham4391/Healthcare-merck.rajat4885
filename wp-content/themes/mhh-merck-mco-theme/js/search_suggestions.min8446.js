const form=document.getElementById("site-search");form.addEventListener("input",typingLogic);const search_result=document.getElementById("search_suggestion_result");function typingLogic(e){const t=e.target.value;if(""!==t)return getResult(t);search_result.textContent=""}function getResult(e){if(sessionStorage[e]){const t=sessionStorage.getItem(e);createTextResult(JSON.parse(t))}else{var t=new XMLHttpRequest;t.open("GET",`${document.location.href}/wp-json/mco-api/v1/get-suggestions/${e}`,!0),t.onload=function(){if(this.status>=200&&this.status<400){var t=JSON.parse(this.response);search_result.textContent="",t&&t.length>0&&""!==e&&(sessionStorage.setItem(e,JSON.stringify(t[0])),createTextResult(t[0]))}},t.onerror=function(){return search_result.textContent="",Promise.reject(data)},t.send()}}function createNode(e,t){let s=document.createElement("li");s.classList.add("suggestion_list");let n="";switch(t){case"search":n=`${theme_directory}/images/search.svg`;break;case"direct_page_link_ext":n=`${theme_directory}/images/link.svg`;break;case"direct_page_link_int":n=`${theme_directory}/images/arrow-right-line.svg`;break;case"direct_document_download":n=`${theme_directory}/images/download.svg`}return s.innerHTML=`\n        <a href=${e.url} class="suggestion_link" target=${"direct_page_link_ext"===t?"_blank":""}> \n            <span class="suggestion-icon">\n                <img src=${n} alt="search icon" />\n            </span>\n            <p>${e.title}</p>\n        <a/>\n    `,s}function createTextResult(e){search_result.textContent="",e.suggestion_repeater.map((e=>{"search"===e.search_suggestion_type&&search_result.appendChild(createNode(e.search_suggestion_link,"search")),"direct_page_link_int"===e.search_suggestion_type&&search_result.appendChild(createNode(e.search_suggestion_link,"direct_page_link_int")),"direct_page_link_ext"===e.search_suggestion_type&&search_result.appendChild(createNode(e.search_suggestion_link,"direct_page_link_ext")),"direct_document_download"===e.search_suggestion_type&&search_result.appendChild(createNode(e.search_suggestion_link,"direct_document_download"))}))}