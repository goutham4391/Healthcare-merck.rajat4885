localStorage.getItem("d8_news_item_category_data_company_statements")||localStorage.setItem("d8_news_item_category_data_company_statements","false");let d8_current_page=1,d8_total_posts_for_query=0,d8_category_data=[];function d8Init(){console.log("INIT");try{let t=document.getElementsByClassName("mco-d8-press-release-search-block");for(let a=0;a<t.length;a++){let n=t[a],s=n.getElementsByClassName("d8-search-input")[0],l=n.getElementsByClassName("d8-year-filter")[0],r=n.getElementsByClassName("d8-search")[0],d=n.getElementsByClassName("d8-cancel")[0],o=n.getElementsByClassName("d8-results-per-page-setting")[0],c=n.getElementsByClassName("d8-pagination-pagers")[0].querySelectorAll("p")[0],i=n.getElementsByClassName("d8-page-left")[0],_=n.getElementsByClassName("d8-page-right")[0],p=n.getElementsByClassName("d8-results-container")[0];if("false"===localStorage.getItem("d8_news_item_category_data_company_statements")){let t=window.location.host,a=window.location.pathname.split("/")[1];"msd"!==a&&"merck"!==a||(t=t+"/"+a),t="https://"+t+"/wp-json/wp/v2/tags?slug=",console.log(t);var e=new XMLHttpRequest;e.open("GET",t+"company-statement",!1),e.onload=function(e){if(200==this.status){let e=JSON.parse(this.responseText)[0];d8_category_data.push(e)}},e.send(null),localStorage.setItem("d8_news_item_category_data_company_statements",JSON.stringify(d8_category_data))}else d8_category_data=JSON.parse(localStorage.getItem("d8_news_item_category_data_company_statements"));d8SearchPressReleases(s,l,o,d8_current_page,p,c,i,_),r.addEventListener("click",(function(){d8_current_page=1,d8SearchPressReleases(s,l,o,d8_current_page,p,c,i,_)})),d.addEventListener("click",(function(){d8_current_page=1,d8ClearResults(s,l,p),d8SearchPressReleases(s,l,o,d8_current_page,p,c,i,_)})),i.addEventListener("click",(function(){d8_current_page--,d8_current_page<1&&(d8_current_page=1),d8SearchPressReleases(s,l,o,d8_current_page,p,c,i,_)})),_.addEventListener("click",(function(){d8_current_page++,d8SearchPressReleases(s,l,o,d8_current_page,p,c,i,_)})),o.addEventListener("change",(function(){d8_current_page=1,d8SearchPressReleases(s,l,o,d8_current_page,p,c,i,_)}))}}catch(e){console.log(e)}}function d8SearchPressReleases(e,t,a,n,s,l,r,d){try{let n=a.options[a.selectedIndex].value,c=window.location.host,i=window.location.pathname.split("/")[1];if("msd"!==i&&"merck"!==i||(c=c+"/"+i),c="https://"+c+"/wp-json/wp/v2/news_item/?per_page="+n+"&page="+d8_current_page,""!=e.value&&(c=c+"&search="+encodeURI(e.value)),"All"!==t.options[t.selectedIndex].value&&"all"!==t.options[t.selectedIndex].value){let e=parseInt(t.options[t.selectedIndex].value),a=new Date("01/01/"+(e+1)),n=new Date("01/01/"+e);c=c+"&before="+a.toISOString()+"&after="+n.toISOString()}categories=d8_category_data.filter((function(e){return"company-statement"===e.slug}))[0].id,""!==categories&&(c=c+"&tags="+categories);var o=new XMLHttpRequest;o.open("GET",c,!0),o.onload=function(e){if(200==this.status){let e=JSON.parse(this.responseText);d8_total_posts_for_query=this.getResponseHeader("X-WP-Total"),d8UpdatePaginationData(l,n,r,d),d8AddResultsToPage(s,e)}},o.send(null)}catch(e){console.log(e)}}function d8UpdatePaginationData(e,t,a,n){try{let s;if(1===d8_current_page)s="1-"+(t>d8_total_posts_for_query?d8_total_posts_for_query:t)+" of "+d8_total_posts_for_query,a.setAttribute("style","display: none;"),n.setAttribute("style","");else{a.setAttribute("style","");let e=(d8_current_page-1)*t+1,l=t*d8_current_page;l>d8_total_posts_for_query?(l=d8_total_posts_for_query,n.setAttribute("style","display: none;")):n.setAttribute("style",""),s=e+"-"+l+" of "+d8_total_posts_for_query}e.textContent=s}catch(e){console.log(e)}}function d8AddResultsToPage(e,t){try{if(e.innerHTML="",0===t.length){let t=document.createElement("H3");t.setAttribute("style","text-align: center;"),t.textContent="Sorry, there aren't any company statements available for this query.",e.appendChild(t)}else{var a=["January","February","March","April","May","June","July","August","September","October","November","December"];for(let n=0;n<t.length;n++){let s=document.createElement("DIV");s.classList.add("d8-result-item");let l=document.createElement("DIV");l.classList.add("d8-result-item-date");let r=document.createElement("P"),d=t[n].date.split("-")[0],o=a[parseInt(t[n].date.split("-")[1])-1],c=t[n].date.split("-")[2].split("T")[0];r.textContent=o+" "+c+", "+d;let i=document.createElement("A");i.href=t[n].link,i.appendChild(r),l.appendChild(i),s.appendChild(l);let _=document.createElement("DIV");_.classList.add("d8-result-item-headline");let p=document.createElement("P"),u=document.createElement("SPAN");u.textContent=HtmlDecode(t[n].title.rendered),p.appendChild(u);let m=document.createElement("A");m.href=t[n].link,m.appendChild(p),_.appendChild(m),s.appendChild(_);let g=document.createElement("DIV");g.classList.add("d8-result-item-icon");let y=document.createElement("A");y.href=t[n].link;let h=document.createElement("DIV");h.classList.add("d8-result-item-chevron-clicker"),y.appendChild(h),g.appendChild(y),s.appendChild(g),e.appendChild(s)}}}catch(e){console.log(e)}}function d8ClearResults(e,t,a){try{e.value="",t.selectedIndex=0,a.innerHTML=""}catch(e){console.log(e)}}function HtmlDecode(e){let t=document.createElement("textarea");return t.innerHTML=e,t.value}window.onload=function(){d8Init()};