localStorage.getItem("d8_news_item_category_data")||localStorage.setItem("d8_news_item_category_data","false");let d8_current_page=1,d8_total_posts_for_query=0,d8_category_data=[];function d8Init(){try{let t=document.getElementsByClassName("mco-d8-press-release-search-block");for(let a=0;a<t.length;a++){let s=t[a],n=s.getElementsByClassName("d8-search-input")[0],l=s.getElementsByClassName("d8-year-filter")[0],r=s.getElementsByClassName("d8-show-more-toggle-container")[0],d=s.getElementsByClassName("d8-tags-filter-container")[0],o=s.getElementsByClassName("d8-checkbox"),c=s.getElementsByClassName("d8-search")[0],i=s.getElementsByClassName("d8-cancel")[0],u=s.getElementsByClassName("d8-results-per-page-setting")[0],p=s.getElementsByClassName("d8-pagination-pagers")[0].querySelectorAll("p")[0],_=s.getElementsByClassName("d8-page-left")[0],g=s.getElementsByClassName("d8-page-right")[0],m=s.getElementsByClassName("d8-results-container")[0];if("false"===localStorage.getItem("d8_news_item_category_data")){let t=window.location.host,a=window.location.pathname.split("/")[1];"msd"!==a&&"merck"!==a||(t=t+"/"+a),t="https://"+t+"/wp-json/wp/v2/tags?slug=";for(let a=0;a<o.length;a++){let s=o[a].getAttribute("name").replace("d8-","");if("all"!==s){(e=new XMLHttpRequest).open("GET",t+s,!1),e.onload=function(e){if(200==this.status){let e=JSON.parse(this.responseText)[0];d8_category_data.push(e)}},e.send(null)}else{let a="press-release";var e;if("all"!==a)(e=new XMLHttpRequest).open("GET",t+a,!1),e.onload=function(e){if(200==this.status){let e=JSON.parse(this.responseText)[0];d8_category_data.push(e)}},e.send(null)}}localStorage.setItem("d8_news_item_category_data",JSON.stringify(d8_category_data))}else d8_category_data=JSON.parse(localStorage.getItem("d8_news_item_category_data"));d8SearchPressReleases(n,l,o,u,d8_current_page,m,p,_,g),c.addEventListener("click",(function(){d8_current_page=1,d8SearchPressReleases(n,l,o,u,d8_current_page,m,p,_,g)})),n.addEventListener("keyup",(function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(d8_current_page=1,d8SearchPressReleases(n,l,o,u,d8_current_page,m,p,_,g))})),i.addEventListener("click",(function(){d8_current_page=1,d8ClearResults(n,l,o,m),d8SearchPressReleases(n,l,o,u,d8_current_page,m,p,_,g)})),_.addEventListener("click",(function(){d8_current_page--,d8_current_page<1&&(d8_current_page=1),d8SearchPressReleases(n,l,o,u,d8_current_page,m,p,_,g)})),g.addEventListener("click",(function(){d8_current_page++,d8SearchPressReleases(n,l,o,u,d8_current_page,m,p,_,g)})),u.addEventListener("change",(function(){d8_current_page=1,d8SearchPressReleases(n,l,o,u,d8_current_page,m,p,_,g)})),r.addEventListener("click",(function(){if(window.innerWidth<=768){let e="none"===d.style.display,t=r.querySelectorAll("p")[0],a=r.querySelectorAll(".d8-show-more-chevron")[0];e?(t.innerHTML="<strong>Show less</strong>",a.classList.remove("closed"),a.classList.add("opened")):(t.innerHTML="<strong>Show more</strong>",a.classList.remove("opened"),a.classList.add("closed")),d.style.display=e?"block":"none"}}))}}catch(e){console.log(e)}}function d8SearchPressReleases(e,t,a,s,n,l,r,d,o){try{let n=s.options[s.selectedIndex].value,i=window.location.host,u=window.location.pathname.split("/")[1];if("msd"!==u&&"merck"!==u||(i=i+"/"+u),i="https://"+i+"/wp-json/wp/v2/news_item/?per_page="+n+"&page="+d8_current_page,""!=e.value&&(i=i+"&search="+encodeURI(e.value)),"All"!==t.options[t.selectedIndex].value&&"all"!==t.options[t.selectedIndex].value){let e=parseInt(t.options[t.selectedIndex].value),a=new Date("01/01/"+(e+1)),s=new Date("01/01/"+e);i=i+"&before="+a.toISOString()+"&after="+s.toISOString()}let p=d8_category_data.filter((function(e){return"press-release"===e.slug}))[0].id;for(let e=0;e<a.length;e++){let t=a[e].getAttribute("name").replace("d8-","");if("all"===t&&a[e].checked){p=d8_category_data.filter((function(e){return"press-release"===e.slug}))[0].id;break}"all"!==t&&a[e].checked&&(p+=""===p?d8_category_data.filter((function(e){return e.slug===t}))[0].id:","+d8_category_data.filter((function(e){return e.slug===t}))[0].id,p=p.replace(d8_category_data.filter((function(e){return"press-release"===e.slug}))[0].id.toString()+",",""),p=p.replace(d8_category_data.filter((function(e){return"press-release"===e.slug}))[0].id.toString(),""))}""!==p&&(i=i+"&tags="+p);var c=new XMLHttpRequest;c.open("GET",i,!0),c.onload=function(e){if(200==this.status){let e=JSON.parse(this.responseText);d8_total_posts_for_query=this.getResponseHeader("X-WP-Total"),d8UpdatePaginationData(r,n,d,o),d8AddResultsToPage(l,e)}},c.send(null)}catch(e){console.log(e)}}function d8UpdatePaginationData(e,t,a,s){try{let n;if(1===d8_current_page)n="1-"+(t>d8_total_posts_for_query?d8_total_posts_for_query:t)+" of "+d8_total_posts_for_query,a.setAttribute("style","display: none;"),s.setAttribute("style","");else{a.setAttribute("style","");let e=(d8_current_page-1)*t+1,l=t*d8_current_page;l>d8_total_posts_for_query?(l=d8_total_posts_for_query,s.setAttribute("style","display: none;")):s.setAttribute("style",""),n=e+"-"+l+" of "+d8_total_posts_for_query}e.textContent=n}catch(e){console.log(e)}}function d8AddResultsToPage(e,t){try{if(e.innerHTML="",0===t.length){let t=document.createElement("H3");t.setAttribute("style","text-align: center;"),t.textContent="Sorry, there aren't any press releases available for this query.",e.appendChild(t)}else{var a=["January","February","March","April","May","June","July","August","September","October","November","December"];for(let s=0;s<t.length;s++){let n=document.createElement("DIV");n.classList.add("d8-result-item");let l=document.createElement("DIV");l.classList.add("d8-result-item-date");let r=document.createElement("P"),d=t[s].date.split("-")[0],o=a[parseInt(t[s].date.split("-")[1])-1],c=t[s].date.split("-")[2].split("T")[0];r.textContent=o+" "+c+", "+d;let i=document.createElement("A");i.href=t[s].link,i.appendChild(r),l.appendChild(i),n.appendChild(l);let u=document.createElement("DIV");u.classList.add("d8-result-item-headline");let p=document.createElement("P"),_=document.createElement("SPAN");_.textContent=HtmlDecode(t[s].title.rendered),p.appendChild(_);let g=document.createElement("A");g.href=t[s].link,g.appendChild(p),u.appendChild(g),n.appendChild(u);let m=document.createElement("DIV");m.classList.add("d8-result-item-icon");let h=document.createElement("A");h.href=t[s].link;let f=document.createElement("DIV");f.classList.add("d8-result-item-chevron-clicker"),h.appendChild(f),m.appendChild(h),n.appendChild(m),e.appendChild(n)}}}catch(e){console.log(e)}}function d8ClearResults(e,t,a,s){try{e.value="",t.selectedIndex=0;for(let e=0;e<a.length;e++)a[e].checked=!1;s.innerHTML=""}catch(e){console.log(e)}}function HtmlDecode(e){let t=document.createElement("textarea");return t.innerHTML=e,t.value}window.onload=function(){d8Init()};